try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f5f5966a-50aa-4611-bd5d-31c01ad77c6a",e._sentryDebugIdIdentifier="sentry-dbid-f5f5966a-50aa-4611-bd5d-31c01ad77c6a")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2605],{2722:(e,t,n)=>{n.d(t,{S:()=>f,v:()=>m});var r=n(54568),s=n(23812),a=n(84617),i=n(98304),o=n(17560),l=n(27541),u=n(39214),d=n(59666),c=n(66912);function m(e){let{isOpen:t,onClose:n,limitType:m="projects",customTitle:f,customDescription:g}=e,h=(0,l.useRouter)(),v=["opus"===m?{defaultMessage:"More Opus usage*",id:"JxRTAGj5OB"}:"message_limit"===m?{defaultMessage:"Access to tools like research and web search",id:"message_limit_benefit_tools"}:{defaultMessage:"Access to unlimited Projects to organize chats and documents",id:"uK9wA9v6Z3"},"opus"===m&&{defaultMessage:"Access to unlimited Projects to organize chats and documents",id:"uK9wA9v6Z3"},"projects"===m&&{defaultMessage:"More usage*",id:"Rve6Z5dM8k"},"message_limit"===m&&{defaultMessage:"Claude Code directly in your terminal",id:"message_limit_benefit_code"},"message_limit"===m&&{defaultMessage:"Integration to Google Workspace: email, calendar, and docs",id:"message_limit_benefit_workspace"},"message_limit"===m&&{defaultMessage:"Full access to the newest Claude models including Opus",id:"message_limit_benefit_models"},"message_limit"===m&&{defaultMessage:"Extended thinking for complex work",id:"message_limit_benefit_thinking"},"message_limit"!==m&&{defaultMessage:"Ability to search the web",id:"dl29r7OlXE"},"message_limit"!==m&&{defaultMessage:"Extended thinking for complex work",id:"mENE7vJhVQ"},"message_limit"!==m&&{defaultMessage:"Connect Google Workspace: email, calendar, and docs",id:"WwXweMd3IE"},"message_limit"!==m&&{defaultMessage:"Ability to use more Claude models",id:"Qpr1Da1f7N"}].filter(Boolean);return(0,r.jsx)(u.bL,{open:t,onOpenChange:n,children:(0,r.jsx)(u.ZL,{children:(0,r.jsx)(u.hJ,{className:"fixed inset-0 bg-always-black/50 backdrop-brightness-75 z-modal flex items-center justify-center data-[state=open]:animate-[fade_250ms_ease-in_forwards] data-[state=closed]:animate-[fade_125ms_ease-out_reverse_forwards]",children:(0,r.jsxs)(u.UC,{className:"z-modal w-full max-w-sm bg-bg-000 rounded-2xl shadow-xl overflow-hidden focus:outline-none data-[state=open]:animate-[zoom_250ms_ease-in_forwards] data-[state=closed]:animate-[zoom_125ms_ease-out_reverse_forwards]",onEscapeKeyDown:e=>{e.preventDefault(),n()},onInteractOutside:e=>{e.preventDefault(),n()},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-5 pt-4",children:[(0,r.jsx)(c.M,{}),(0,r.jsx)(u.bm,{asChild:!0,children:(0,r.jsx)(s.$,{variant:"ghost",size:"icon_sm",className:"text-text-400 hover:text-text-200",children:(0,r.jsx)(i.X,{size:20,weight:"regular"})})})]}),(0,r.jsxs)("div",{className:"px-5 pb-4 pt-2",children:[(0,r.jsx)("h2",{className:"text-[24px] leading-tight font-medium mb-2 text-text-000",children:f||("opus"===m?(0,r.jsx)(d.A,{defaultMessage:"More Opus with Pro and Max plans",id:"//ixi/rP/O"}):"message_limit"===m?(0,r.jsx)(d.A,{defaultMessage:"Keep chatting with Claude",id:"u3sKHTmxou"}):(0,r.jsx)(d.A,{defaultMessage:"Unlimited projects with Pro and Max plans",id:"RKBJDiWP1p"}))}),(0,r.jsx)("p",{className:"".concat("message_limit"===m?"text-sm":"text-base"," text-text-300 mb-3"),children:g||("opus"===m?(0,r.jsx)(d.A,{defaultMessage:"Free plans only get 3 Opus messages per week. Try again after {date}, or upgrade now to get:",id:"IIJcLbtXZK",values:{date:new Date(Date.now()+6048e5).toLocaleDateString("en-US",{month:"long",day:"numeric"})}}):"message_limit"===m?(0,r.jsx)(d.A,{defaultMessage:"You just hit your free message limit. Upgrade to Pro (or Max) to send more messages. You also get:",id:"vXAAoQRvRg"}):(0,r.jsx)(d.A,{defaultMessage:"Free plans only get access to one Project. Upgrade now to get:",id:"NOiyw9Bber"}))}),(0,r.jsx)("div",{className:"space-y-1.5 mb-6",children:v.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,r.jsx)(o.J,{className:"text-text-400 mt-0.5 flex-shrink-0",size:18,weight:"regular"}),(0,r.jsx)("span",{className:"text-sm text-text-200",children:(0,r.jsx)(d.A,{...e})})]},"benefit-".concat(t)))}),("opus"===m||"projects"===m)&&(0,r.jsx)("p",{className:"text-xs text-text-400 mb-4",children:(0,r.jsx)(a.Y,{href:"https://support.anthropic.com/en/articles/11049762-choosing-a-claude-ai-plan",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(d.A,{defaultMessage:"*Usage limits apply",id:"HFRZOFWXCf"})})}),(0,r.jsx)(s.$,{variant:"primary",size:"lg",className:"w-full text-base font-medium",onClick:()=>{n(),h.push("/upgrade")},children:(0,r.jsx)(d.A,{defaultMessage:"See plans",id:"vbFKkTYpN+"})})]})]})})})})}let f=m},4114:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(18088),s=n(68067),a=n(56706);let i=()=>{let{value:e}=(0,s.fS)("concise_mode_enabled"),{data:t,isLoading:n}=(0,a.O5)(),i=(null==t?void 0:t.defaultStyles)||[],o=[...i,...((null==t?void 0:t.customStyles)||[]).map(e=>({...e,key:e.key||e.uuid}))],[l,u,d]=(0,r.Vc)("claude_personalized_style",null);if(n||!(null==o?void 0:o.length))return{personalizedStyleOptions:[],defaultStyle:null,storedStyle:null,setStoredStyle:u,clearStoredStyle:d,conciseModeEnabled:e};let c=i.length?i.find(e=>!0===e.isDefault)||i[0]:null;if(e&&(c=i.find(e=>"Concise"===e.key)||c),!l)return{personalizedStyleOptions:o,defaultStyle:c,storedStyle:l,setStoredStyle:u,clearStoredStyle:d,conciseModeEnabled:e};let m=o.find(e=>((e,t)=>"default"===e.type&&e.key===t||"custom"===e.type&&e.uuid===t)(e,l.styleKey)),f=Date.now()-new Date(l.timestamp).getTime()>432e5;return{personalizedStyleOptions:o,storedStyle:m&&!f?m:null,defaultStyle:c,setStoredStyle:u,clearStoredStyle:d,conciseModeEnabled:e}}},24443:(e,t,n)=>{n.d(t,{Ah:()=>z,BV:()=>R,DO:()=>P,IX:()=>N,I_:()=>L,L1:()=>k,Mf:()=>C,P2:()=>D,PB:()=>E,Rb:()=>O,SK:()=>A,Sb:()=>S,UG:()=>T,Uq:()=>v,bb:()=>p,ey:()=>w,kY:()=>y,lH:()=>j,mM:()=>x,t5:()=>U,tW:()=>b,xt:()=>I});var r=n(94295),s=n(74813),a=n(1613),i=n(64328),o=n(45054),l=n(80688),u=n(68067),d=n(4869),c=n(7620),m=n(10369),f=n(24407),g=n(94028),h=n(13644);let v="https://support.anthropic.com/articles/11817273-how-does-claude-s-memory-work",p="https://privacy.anthropic.com/en/articles/10023580-is-my-data-used-for-model-training",y="https://support.anthropic.com/en/articles/11817273-using-claude-s-chat-search-and-memory-to-build-on-previous-context#h_4e397dd299",_=f.z.object({memory:f.z.string(),controls:f.z.array(f.z.string()).nullable(),updated_at:f.z.string().datetime({offset:!0}).nullable()}),b=(e,t)=>{var n;let{account:r,activeOrganization:s}=(0,i.YL)(),o=null==r?void 0:r.uuid,u=null==s?void 0:s.uuid,d=C(),c=e?"/api/organizations/".concat(u,"/memory?project_uuid=").concat(e):"/api/organizations/".concat(u,"/memory");return(0,a.Sk)(c,{queryKey:[l.IX,{accountUuid:o,orgUuid:u,projectUuid:e}],enabled:!!s&&(null==(n=null==t?void 0:t.enabled)||n)&&d},e=>_.parse(e))},S=()=>{let{account:e,activeOrganization:t}=(0,i.YL)(),n=null==e?void 0:e.uuid,r=null==t?void 0:t.uuid,s=C(),{addError:u}=(0,o.Y)(),c=(0,m.A)(),f=(0,d.useQueryClient)(),{mutate:g,isPending:h}=(0,a.L2)("/api/organizations/".concat(r,"/memory/synthesize"),"POST",{enabled:!!t&&s,onSuccess:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let[a,i]=t;f.invalidateQueries({queryKey:[l.IX,{accountUuid:n,orgUuid:r,projectUuid:i.project_uuid}]})},onError:()=>{u(c.formatMessage({defaultMessage:"Something went wrong while updating memory",id:"P1AER5mU4P"}))}});return{resynthesizeMemory:g,isResynthesizingMemory:h}},w=()=>{let e=(0,s.st)(),{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,r=C(),{addError:u}=(0,o.Y)(),c=(0,m.A)(),f=(0,d.useQueryClient)(),{mutate:g,isPending:h}=(0,a.L2)("/api/organizations/".concat(n,"/memory/reset"),"POST",{enabled:!!t&&r,onSuccess:()=>{f.invalidateQueries({queryKey:[l.IX]}),e.track({event_key:"claudeai.memory.memory_reset"})},onError:()=>{u(c.formatMessage({defaultMessage:"Something went wrong while resetting memory",id:"1U/+Klpk5D"}))}});return{resetMemory:g,isResettingMemory:h}},x=function(){let{projectUuid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.st)(),{account:n,activeOrganization:r}=(0,i.YL)(),u=null==n?void 0:n.uuid,c=null==r?void 0:r.uuid,f=C(),{addError:g,addSuccess:h}=(0,o.Y)(),v=(0,m.A)(),p=(0,d.useQueryClient)(),{mutate:y,isPending:_}=(0,a.Qv)("/api/organizations/".concat(c,"/memory/controls"),"PUT",(e,t)=>{var n;return{memory:null!=(n=null==t?void 0:t.memory)?n:"",controls:e.controls,updated_at:null==t?void 0:t.updated_at}},{queryKey:[l.IX,{accountUuid:u,orgUuid:c,projectUuid:e}],enabled:!!r&&f,onSuccess:()=>{h(v.formatMessage({defaultMessage:"Memory updated",id:"YqVBaoALVh"})),p.invalidateQueries({queryKey:[l.IX,{accountUuid:u,orgUuid:c,projectUuid:e}]}),t.track({event_key:"claudeai.memory.edit_memory",projectUuid:e})},onError:e=>{g(v.formatMessage({defaultMessage:"Something went wrong while updating memory",id:"P1AER5mU4P"}),{error:e})}});return{updateMemoryControls:y,updateMemoryControlsIsPending:_}},M=()=>{let{value:e}=(0,u.fS)("claudeai_saffron_themes_enabled");return e},k=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,n=M(),r=t?"/api/organizations/".concat(t,"/memory/themes"):null;return(0,a.Sk)(r,{staleTime:3e5,enabled:!!t&&!!r&&n})},C=()=>{let{value:e}=(0,u.fS)("claudeai_saffron_enabled");return e},P=()=>{let{value:e}=(0,u.fS)("claudeai_saffron_admin_toggle_enabled"),t=C();return e&&!t},T=()=>{let e=M(),t=A();return e&&!!t},E=()=>{var e;let t=(0,i.mV)(),{data:n}=(0,h.rX)(),r=!!n&&!(null==(e=n.disabled_features)?void 0:e.includes("saffron"));return!t||r},A=()=>{var e;let t=E(),{account:n}=(0,i.YL)(),{value:r}=(0,u.fS)("claudeai_saffron_default_enabled");return!!t&&(null!=(e=null==n?void 0:n.settings.enabled_saffron)?e:r||void 0)},j=()=>{let e=(0,s.st)(),{account:t}=(0,i.YL)(),{mutate:n}=(0,r.Jy)(),{resetMemory:a}=w();return(r,s)=>{n({...null==t?void 0:t.settings,enabled_saffron:r}),(null==s?void 0:s.shouldResetMemory)&&a(),e.track({event_key:"claudeai.memory.account_setting_toggled",enabled:r,reset_memory:!!(null==s?void 0:s.shouldResetMemory)})}},z=()=>{let{value:e}=(0,u.fS)("claudeai_saffron_search_enabled");return e},I=()=>{let e=(0,s.st)(),{account:t}=(0,i.YL)(),n=(()=>{var e;let{account:t}=(0,i.YL)(),n=(()=>{let{value:e}=(0,u.fS)("claudeai_saffron_search_default_enabled");return e})();return null!=(e=null==t?void 0:t.settings.enabled_saffron_search)?e:n})(),a=z(),{mutate:o}=(0,r.Jy)(),{mutate:l}=(0,g.nI)(),d=(0,c.useRef)(null==t?void 0:t.settings);return(0,c.useEffect)(()=>{d.current=null==t?void 0:t.settings},[null==t?void 0:t.settings]),{toggleSaffronSearch:(0,c.useCallback)(t=>{o({...d.current,enabled_saffron_search:t}),a&&t&&l({}),e.track({event_key:"claudeai.conversation_search.account_setting_toggled",enabled:t})},[o,l,a,e]),saffronSearchEnabled:n}},L=()=>{let{value:e}=(0,u.fS)("claudeai_saffron_ghost_enabled");return e},U=()=>(0,u.T9)("claudeai_saffron_frontend","resynthesize_enabled",!1,u.Km),O=()=>(0,u.T9)("claudeai_saffron_frontend","max_num_controls",10,u.T2),R=()=>(0,u.T9)("claudeai_saffron_frontend","max_control_chars",100,u.T2),D=()=>{let e=(0,m.A)(),{value:t}=(0,u.fS)("claude_grove_enabled"),n=A();return t&&n?e.formatMessage({defaultMessage:"Incognito chats aren’t saved, added to memory, or used to train models.",id:"7vPniYndmQ"}):t?e.formatMessage({defaultMessage:"Incognito chats aren’t saved to history or used to train models.",id:"ePzoyDXPHe"}):n?e.formatMessage({defaultMessage:"Incognito chats aren’t saved or added to memory.",id:"SOrtx8O6Rq"}):e.formatMessage({defaultMessage:"Incognito chats aren’t saved to history.",id:"8EiWE4PL22"})},N=()=>{let e=(0,m.A)();return A()?e.formatMessage({defaultMessage:"Use incognito when you don’t want your chat saved or added to memory.",id:"gsUilLtALx"}):e.formatMessage({defaultMessage:"Use incognito when you don’t want your chat saved to history.",id:"CwwcFpT0TC"})}},42605:(e,t,n)=>{n.d(t,{_:()=>A,o:()=>E});var r=n(54568),s=n(76737),a=n(44894),i=n(52135),o=n(34003),l=n(1613),u=n(16178),d=n(7620),c=n(4211),m=n(42469),f=n(86141),g=n(94028),h=n(24443),v=n(93714),p=n(64328),y=n(45054),_=n(4114),b=n(59074),S=n(59294),w=n(48778),x=n(54667),M=n(55188),k=n(88775),C=n(27164),P=n(74196);let T=d.createContext({attachments:[],files:[],transitionFiles:[],syncSourceUuids:[],isAtMaxNumUploads:!1,model:"",beamChatUuid:void 0,isNewBeamChat:!1,isChatSyncing:!1,personalizedStyle:void 0,isProjectSyncing:!1,isNewConversation:!1,isProjectLocked:!1,isSending:!1,setPrompt:()=>void 0,setAttachments:()=>void 0,setTipTapEditorState:()=>void 0,setFiles:()=>void 0,setSyncSourceUuids:()=>void 0,setModel:()=>Promise.resolve(),setProjectUuid:()=>void 0,setBeamChatUuid:()=>void 0,setIsNewBeamChat:()=>void 0,sendMessage:()=>void 0,sendTransparentMessage:()=>void 0,stopSampling:()=>void 0,pendingConversationSettings:{},conversation:void 0,focusInput:()=>void 0,improvePrompt:()=>void 0,isImprovingPrompt:!1,promptInputRef:{current:null},willRedirectOnSubmit:!1,hasBlockingWarning:!1,setHasBlockingWarning:()=>void 0,setPersonalizedStyle:()=>void 0,isUploadingDriveSync:!1,isUploadingGithubSync:!1,setIsUploadingDriveSync:()=>void 0,setIsUploadingGithubSync:()=>void 0,includeProfilePreferences:!0,setIncludeProfilePreferences:()=>void 0,isUploadingFile:!1,setIsUploadingFile:()=>void 0,validateMaxUploadLimit:()=>!1,onDrop:()=>void 0,onPasteFiles:()=>Promise.resolve(),handleUpload:()=>Promise.resolve(),uploadInputProps:{type:"",accept:"",onChange:()=>void 0,multiple:!1,"aria-label":""},hasAttachments:!1,isModelSelectorOpen:!1,setIsModelSelectorOpen:()=>void 0,setPendingConversationSettings:()=>void 0,currentCompassTask:void 0,setCurrentCompassTask:()=>void 0}),E=()=>d.useContext(T),A=e=>{var t,n,E,A,j,z,I;let{onSend:L,willRedirectOnSubmit:U,onCreate:O,onSessionCreate:R,onStopSampling:D,children:N}=e,Y="conversation"in e,F="namespace"in e?e.namespace:void 0,K=Y?e.conversation:void 0,Q="projectUuid"in e?e.projectUuid:void 0,B=null!=(n=null==K?void 0:K.id)?n:void 0===Q?"new-conversation":"".concat(Q,":conversation"),q=(0,P.X)(),{store:X,unsubscribe:G}=(0,d.useMemo)(()=>(0,x.E)({enableV2:q,conversationId:B}),[B,q]);(0,d.useEffect)(()=>()=>{null==G||G()},[G]);let{incognitoModeEnabled:J}=(0,M.S)(),V=(0,d.useRef)(null);(0,d.useEffect)(()=>{(0,X.getState().setPromptInputRef)(V)},[X]);let{markMessageSent:W}=(0,S.B)(),H=(0,d.useCallback)(()=>{Y&&D&&D()},[D,Y]);(e=>{let t=(0,d.useCallback)(t=>{if(e&&!(e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||"true"===e.getAttribute("contenteditable")||"textbox"===e.getAttribute("role")))(document.activeElement)&&1===t.key.length&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n;if(!(" "===t.key&&(e=>{if(!e)return!1;let t=e.tagName;return"BUTTON"===t||"SUMMARY"===t||"SELECT"===t||("INPUT"===t?["button","submit","reset","checkbox","radio"].includes(e.type):["button","checkbox","radio","switch","menuitem","menuitemcheckbox","menuitemradio","option"].includes(e.getAttribute("role")||""))})(document.activeElement)))t.preventDefault(),null==(n=e.getEditor())||n.chain().insertContent(t.key).focus().run()}},[e]);(0,d.useEffect)(()=>(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)),[t])})(V.current);let{attachments:Z,setAttachments:$,files:ee,setFiles:et,syncSourceUuids:en,setSyncSourceUuids:er,clear:es}=(0,C.LM)(B,X,F),{setPrompt:ea,setTipTapEditorState:ei,isTipTapEditorStateUnsafe:eo,clear:el}=(0,C.jI)(B,"",X,F),eu=(0,d.useCallback)(()=>{es(),el()},[es,el]),ed=(0,f.NY)(en),ec=(0,f.qJ)(ed),em=(0,l.B7)(ed),ef=Z.length+ee.length+en.length>=a.XA.maxTotalUploadsPerMessage,{isModelSelectorOpen:eg,isSending:eh,isUploadingDriveSync:ev,isUploadingGithubSync:ep,personalizedStyle:ey,includeProfilePreferences:e_,currentCompassTask:eb}=(0,c.P)(X,(0,m.k)(e=>({isModelSelectorOpen:e.isModelSelectorOpen,isSending:e.isSending,isUploadingDriveSync:e.isUploadingDriveSync,isUploadingGithubSync:e.isUploadingGithubSync,personalizedStyle:e.personalizedStyle,includeProfilePreferences:e.includeProfilePreferences,currentCompassTask:e.currentCompassTask}))),eS=X.getState().setIsModelSelectorOpen,ew=X.getState().setIsSending,ex=X.getState().setIsUploadingDriveSync,eM=X.getState().setIsUploadingGithubSync,ek=X.getState().setPersonalizedStyle,eC=X.getState().setIncludeProfilePreferences,eP=X.getState().setCurrentCompassTask,eT=X.getState().setModel,eE=X.getState().setConversation,eA=X.getState().setPendingConversationSettings,ej=X.getState().setSyncSourceUuids,ez=X.getState().setProjectUuid,[eI,eL]=d.useState(),{stickyModelPreference:eU}=(0,i.F)(),eO=null!=(j=null!=(A=null!=(E=null==K?void 0:K.model)?E:eI)?A:eU)?j:void 0,[eR,eD]=d.useState(),eN=(0,d.useMemo)(()=>({}),[]);(0,d.useLayoutEffect)(()=>{let e=X.getState();e.model!==eO&&eT(eO),e.conversation!==K&&eE(K);let t=null!=eR?eR:eN,n=e.pendingConversationSettings,r=!n||0===Object.keys(n).length,s=!eR||0===Object.keys(eR).length;r&&s||n===t||eA(t),e.syncSourceUuids!==en&&ej(en)},[X,K,eO,en,eR,eN,eT,eE,eA,ej]);let eY=(0,d.useCallback)(e=>{eD(t=>{let n={...t,...e};return eA(n),n})},[eA]),eF=(0,c.P)(X,e=>e.projectUuid),eK=(0,h.Ah)(),{mutate:eQ}=(0,g.nI)(),eB=(0,d.useCallback)(e=>{ez(e),eK&&e&&eQ&&eQ({project_uuid:e})},[eK,eQ,ez]),eq=(0,v.ks)(eF),{beamUuid:eX}=(0,w.d)(),[eG,eJ]=d.useState(eX),[eV,eW]=d.useState(!1),eH=(0,d.useCallback)(e=>{eJ(e),e&&eW(!1)},[]),eZ=(0,d.useCallback)(e=>{eW(e),e&&eJ(void 0)},[]),[e$,e0]=d.useState(),{storedStyle:e1,defaultStyle:e2}=(0,_.p)();(0,d.useEffect)(()=>{let e=null!=e1?e1:e2;!ey&&e&&ek(e)},[e1,e2,ey,ek]),(0,d.useEffect)(()=>{Q&&eF!==Q&&eB(Q)},[Q,eF,eB]);let e4="setPersonalizedStyleCallback"in e?e.setPersonalizedStyleCallback:null;(0,d.useEffect)(()=>{e0(void 0),ew(!1)},[null==K?void 0:K.id,ew]),(0,d.useEffect)(()=>{null==e4||e4(ey)},[ey,e4]);let e6=(0,d.useCallback)(async()=>{let{prompt:e}=(0,k.Oh)(X.getState(),q),t=X.getState().setPrompt;if(V.current&&(""!==e.trim()||0!==Z.length||0!==ee.length||0!==en.length)){U&&e0([...ee]),eu(),X.getState().setPrompt("",{forceUpdateTiptap:!1}),U?V.current.setEditable(!1):V.current.setContent(""),ew(!0);try{if(W(),Y&&L)await L({prompt:e,attachments:Z,files:ee,syncSources:em,personalized_style:ey}),ew(!1),e0(void 0);else if(X.getState().pendingConversationSettings.enabled_yukon_gold&&R)await R(e);else{let t=X.getState().pendingConversationSettings;await O({prompt:e,attachments:Z,files:ee,syncSources:em,model:eO,project_uuid:eF,is_new_beam_chat:eV||void 0,beam_chat_uuid:eG,personalized_style:ey,include_conversation_preferences:e_,is_temporary:J,...t})}}catch(r){var n;if(t(e),null==(n=V.current)||n.setContent(e),$(Z),et(ee),er(en),V.current.setEditable(!0),ew(!1),e0(void 0),r instanceof u.LG&&"opus_messages_rate_limit_exceeded"===r.errorCode)(0,b.T)();else throw r}}},[q,X,Z,eu,ee,e_,Y,eO,O,L,ey,eF,$,et,er,en,em,U,J,ew,W,eV,eG,R]),e5=(0,d.useCallback)(async e=>{if(void 0!==e&&""!==e.trim()&&Y){ew(!0);try{L&&(await L({prompt:e,attachments:[],files:[],syncSources:[],personalized_style:ey}),ew(!1))}catch(e){if(e instanceof u.LG&&"opus_messages_rate_limit_exceeded"===e.errorCode)(0,b.T)();else throw e;ew(!1)}}},[Y,L,ey,ew]),{streamImprovement:e8,isStreaming:e7}=function(){let{activeOrganization:e}=(0,p.YL)(),[t,n]=(0,d.useState)(!1),[r,s]=(0,d.useState)(null),a=(0,d.useRef)(null),{addError:i}=(0,y.Y)(),o=(0,d.useCallback)(async(t,r,o,l)=>{a.current&&a.current.abort();let u=new AbortController;a.current=u,n(!0),s(null);let d="/api/organizations/".concat(null==e?void 0:e.uuid,"/prompt/improve/stream");try{var c,m,f;let e=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include",signal:u.signal});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let n=null==(c=e.body)?void 0:c.getReader(),s=new TextDecoder;if(!n)throw Error("No response body");let a="",i="",l=!1;for(;!l;){let e=await n.read();if(e.done){l=!0;break}let t=e.value,u=(a+=s.decode(t,{stream:!0})).split("\n");for(let e of(a=u.pop()||"",u))if(e.startsWith("data: ")){let t=e.slice(6);if("[DONE]"===t)continue;try{let e=JSON.parse(t);switch(e.type){case"content_block_delta":(null==(m=e.delta)?void 0:m.text)&&(i+=e.delta.text,r(e.delta.text));break;case"message_stop":o(e.improved_prompt||i);break;case"error":throw Error((null==(f=e.error)?void 0:f.message)||"Unknown error occurred")}}catch(e){}}else e.startsWith("event: ")&&e.slice(7)}}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;let e=t instanceof Error?t:Error(String(t));s(e),null==l||l(e),i("Failed to improve prompt.",{error:e})}finally{n(!1),a.current===u&&(a.current=null)}},[null==e?void 0:e.uuid,i]);return(0,d.useEffect)(()=>()=>{a.current&&a.current.abort()},[]),{streamImprovement:o,isStreaming:t,error:r}}(),e9=(0,d.useCallback)(async()=>{var e,t,n,r;let s=X.getState().prompt,a=X.getState().setPrompt;if(!s.trim())return;null==(e=V.current)||e.setEditable(!1);let i="",o=!1;try{await e8({conversation_uuid:(null==K?void 0:K.id)||"new-conversation",prompt:s},e=>{var t,n,r;o||(o=!0,a(""),null==(r=V.current)||r.setContent("")),i+=e,a(i,{forceUpdateTiptap:!1}),null==(t=V.current)||t.setContent(i),null==(n=V.current)||n.scrollToEnd()},e=>{var t;a(e),null==(t=V.current)||t.setContent(e)},e=>{var t;a(s),null==(t=V.current)||t.setContent(s)})}catch(e){a(s),null==(t=V.current)||t.setContent(s)}finally{null==(n=V.current)||n.setEditable(!0),null==(r=V.current)||r.focus()}},[X,null==K?void 0:K.id,e8]),e3=(0,d.useCallback)(async e=>{let t=X.getState().prompt;if(eL(e),eT(e),Y){ew(!0);try{var n;await O({prompt:t,attachments:Z,files:ee,syncSources:em,model:e,project_uuid:eF,create_mode:null==K||null==(n=K.conversationSettings)?void 0:n.create_mode,...eR})}finally{ew(!1)}}},[eR,Z,ee,Y,eF,O,X,em,null==K||null==(t=K.conversationSettings)?void 0:t.create_mode,ew,eT]),te=(0,d.useCallback)(()=>{var e;return null==(e=V.current)?void 0:e.focus()},[V]),[tt,tn]=d.useState(!1),tr=(0,a.cV)(),ts=(0,o.u9)(),[ta,ti,to,tl,tu,td,tc,tm]=(0,s.Si)({syncSourceCount:en.length,attachments:Z,setAttachments:$,numExistingConversationAttachments:null!=(z=null==K?void 0:K.attachmentsSoFar)?z:0,files:ee,setFiles:et,numExistingConversationFiles:null!=(I=null==K?void 0:K.files.length)?I:0,detectSameAttachment:()=>!1,selectedModel:eO,conversationUuid:null==K?void 0:K.id,blobFileUploadsEnabled:tr,wiggleEnabled:null!=ts&&ts}),tf=Z.length+ee.length,tg=en.length,th=ta||ev||ep,tv=tf>0||tg>0||th,tp=(0,d.useMemo)(()=>{var t;return{attachments:Z,files:e.willRedirectOnSubmit&&eh?null!=e$?e$:[]:ee,syncSourceUuids:en,isAtMaxNumUploads:ef,isUploadingDriveSync:ev,isUploadingGithubSync:ep,model:eO,beamChatUuid:eG,isNewBeamChat:eV,isChatSyncing:ec,personalizedStyle:ey,isProjectSyncing:eq,isNewConversation:void 0===K||0===K.messagesSoFar,isProjectLocked:void 0!==Q||void 0!==K,isSending:eh,setPrompt:ea,setTipTapEditorState:ei,setAttachments:$,setFiles:et,setSyncSourceUuids:er,setModel:e3,setProjectUuid:eB,setBeamChatUuid:eH,setIsNewBeamChat:eZ,sendMessage:e6,sendTransparentMessage:e5,improvePrompt:e9,isImprovingPrompt:e7,stopSampling:H,conversation:K,focusInput:te,promptInputRef:V,willRedirectOnSubmit:null!=(t=e.willRedirectOnSubmit)&&t,hasBlockingWarning:tt,setHasBlockingWarning:tn,setPersonalizedStyle:ek,setIsUploadingDriveSync:ex,setIsUploadingGithubSync:eM,includeProfilePreferences:e_,setIncludeProfilePreferences:eC,pendingConversationSettings:eR,setPendingConversationSettings:eY,isUploadingFile:ta,setIsUploadingFile:ti,validateMaxUploadLimit:to,onDrop:tl,onPasteFiles:tu,handleUpload:td,uploadInputProps:tm,hasAttachments:tv,isModelSelectorOpen:eg,setIsModelSelectorOpen:eS,isPromptUnsafe:eo,currentCompassTask:eb,setCurrentCompassTask:eP}},[Z,K,ee,te,Q,tt,e_,ef,ec,eq,eh,ev,ep,eO,ey,eB,eG,eV,e.willRedirectOnSubmit,e6,e5,e9,e7,$,et,e3,eR,eY,eH,eZ,ea,er,ei,H,en,e$,ta,ti,to,tl,tu,td,tm,tv,eg,eS,eo,eb,eP,eC,ex,eM,ek]);return(0,r.jsx)(k.jM,{value:X,children:(0,r.jsx)(T.Provider,{value:tp,children:N})})}},48778:(e,t,n)=>{n.d(t,{d:()=>a}),n(54568),n(94295),n(64328),n(18088);var r=n(7620);let s=(0,r.createContext)({isInBeam:!1,beamUuid:void 0,beamConversationSettings:void 0,setBeamConversationSettings:void 0}),a=()=>(0,r.useContext)(s)},52135:(e,t,n)=>{n.d(t,{F:()=>l});var r=n(68067),s=n(27736),a=n(7620),i=n(96614),o=n(86545);let l=()=>{let e="sticky-model-selector",{value:t}=(0,r.fS)("sticky_model_selector"),{value:n}=(0,r.fS)("model_selector_enabled"),{activeModelOptions:l}=(0,o.A9)(),u=(0,i.Z3)(null),d=(0,s.useQuery)({queryKey:[e],queryFn:()=>{if(!t||!n)return null;let r=localStorage.getItem(e);return r===u?null:r&&l.find(e=>e.model===r)?r:null},initialData:null}),c=(0,a.useCallback)(t=>{t&&localStorage.setItem(e,t),d.refetch()},[d]);return{stickyModelPreference:d.data,setStickyModelPreference:c}}},55188:(e,t,n)=>{n.d(t,{S:()=>m,r:()=>f});var r=n(54568),s=n(74813),a=n(39613),i=n(99969),o=n.n(i),l=n(27541),u=n(7620),d=n(24443);let c=u.createContext({incognitoModeEnabled:!1,setIncognitoModeEnabled:o(),temporaryConversationUuid:null,setTemporaryConversationUuid:o()}),m=()=>u.useContext(c),f=e=>{let{children:t}=e,n=(0,s.st)(),i=(0,l.useRouter)(),o=(0,l.useSearchParams)(),m=(0,d.I_)(),f=o.has(a.cn),[g,h]=(0,u.useState)(f),v=(0,u.useRef)(g),[p,y]=(0,u.useState)(null);(0,u.useEffect)(()=>{v.current=g},[g]),(0,u.useEffect)(()=>{f&&!g&&h(!0)},[f,g]);let _=(0,u.useCallback)(e=>{if(h(e),e)i.push("?".concat(a.cn));else{y(null);let e=new URLSearchParams(o.toString());e.delete(a.cn);let t=e.toString();i.push("".concat(window.location.pathname).concat(t?"?".concat(t):""),void 0)}n.track({event_key:"claudeai.incognito_mode.toggled",enabled:e})},[i,o,n]);(0,u.useEffect)(()=>{v.current&&!f&&_(!1)},[_,f]);let b=(0,u.useMemo)(()=>({incognitoModeEnabled:!!m&&g,setIncognitoModeEnabled:_,temporaryConversationUuid:m?p:null,setTemporaryConversationUuid:y}),[g,_,p,y,m]);return(0,r.jsx)(c.Provider,{value:b,children:t})}},56706:(e,t,n)=>{n.d(t,{M$:()=>d,O5:()=>o,f$:()=>l,lo:()=>u,n7:()=>c});var r=n(1613),s=n(64328),a=n(80688),i=n(4869);let o=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/list_styles"),{queryKey:[a.ss,{orgUuid:t}]})},l=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=(0,i.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(t,"/styles/create"),"POST",{onSuccess:()=>{n.invalidateQueries({queryKey:[a.ss,{orgUuid:t}]})}})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{activeOrganization:n}=(0,s.YL)(),o=null==n?void 0:n.uuid,l=(0,i.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(o,"/styles/").concat(e,"/edit"),"PUT",{onSuccess:()=>{l.invalidateQueries({queryKey:[a.ss,{orgUuid:o}]})},enabled:!t})},d=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,o=(0,i.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(n,"/styles/").concat(e,"/delete"),"DELETE",{onSuccess:()=>{o.invalidateQueries({queryKey:[a.ss,{orgUuid:n}]})}})},c=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.L2)("/api/organizations/".concat(t,"/styles/preview"),"POST")}},59074:(e,t,n)=>{n.d(t,{OpusRateLimitModalProvider:()=>l,T:()=>o});var r=n(54568),s=n(7620),a=n(2722);let i=null;function o(){i&&i(!0)}function l(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>(i=t,()=>{i=null}),[]),(0,r.jsx)(a.v,{isOpen:e,onClose:()=>t(!1),limitType:"opus"})}},59294:(e,t,n)=>{n.d(t,{PerformanceMetricsProvider:()=>v,B:()=>p});var r=n(54568);class s extends Error{}class a{add(e){this.buffer[this.head]=e,this.head=(this.head+1)%this.maxSize,this.currentSize<this.maxSize&&this.currentSize++}addAll(e){for(let t of e)this.add(t)}flush(){this.head=0,this.currentSize=0,this.buffer=Array(this.maxSize)}get size(){return this.currentSize}get isEmpty(){return 0===this.currentSize}get isFull(){return this.currentSize===this.maxSize}*values(){if(0===this.currentSize)return;let e=this.isFull?this.head:0;for(let t=0;t<this.currentSize;t++){let n=(e+t)%this.maxSize;yield this.buffer[n]}}toArray(){return Array.from(this.values())}getLast(){if(0===this.currentSize)return;let e=(this.head-1+this.maxSize)%this.maxSize;return this.buffer[e]}getFirst(){if(0===this.currentSize)return;let e=this.isFull?this.head:0;return this.buffer[e]}constructor(e){if(this.maxSize=e,this.head=0,this.currentSize=0,e<1)throw new s("RingBuffer maxSize must be 1 or more");this.buffer=Array(e)}}var i=n(99731),o=n(42248);class l{get mean(){return this.count>0?this._mean:0}get variance(){return this.count>1?this._m2/(this.count-1):0}get stdDev(){return Math.sqrt(this.variance)}calculate(){let e=this._tail-this._mean;this._mean+=e/this.count;let t=this._tail-this._mean;this._m2+=e*t}getSummary(){return{count:this.count,sum:this.sum,min:this.min,max:this.max,mean:this.mean,variance:this.variance,stdDev:this.stdDev}}reset(){this.count=0,this.sum=0,this.min=1/0,this.max=-1/0,this._mean=0,this._m2=0}add(e){this.count+=1,this.sum+=e,this.min=Math.min(this.min,e),this.max=Math.max(this.max,e),this._tail=e,this.calculate()}constructor(){this.count=0,this.sum=0,this.min=1/0,this.max=-1/0,this._tail=0,this._mean=0,this._m2=0,this.reset()}}class u{init(){if(this.shouldReportMemory=(0,i.Y)(),"PerformanceLongTaskTiming"in window)try{this.events.longTask.observer=this.initLongTaskObserver()}catch(e){console.error("PerfMon LongTaskObserver failed to init")}if("PerformanceEventTiming"in window)try{this.events.inputDelay.observer=this.initInputDelayObserver()}catch(e){console.error("PerfMon EventTimingObserver failed to init")}if("PerformanceLongAnimationFrameTiming"in window)try{this.events.longAnimationFrame.observer=this.initLongAnimationFrameObserver()}catch(e){console.error("PerfMon EventTimingObserver failed to init")}this.startReportMetricsInterval(),this.registerVisibilityHandlers()}initLongTaskObserver(){let e=new PerformanceObserver(e=>{for(let n of e.getEntries()){let{attribution:e}=n;if(this.events.longTask.stats.add(n.duration),n.duration>=250){var t;this.events.longTask.buffer.add({start_time:n.startTime,duration_ms:n.duration,attribution_count:null!=(t=null==e?void 0:e.length)?t:0})}}});return e.observe({entryTypes:["longtask"]}),e}initInputDelayObserver(){let e=new PerformanceObserver(e=>{for(let n of e.getEntries()){let e=n.processingStart?n.processingStart-n.startTime:0;if(e>100){this.events.inputDelay.stats.add(n.duration);let r=Number(n.processingEnd)-Number(n.processingStart);if(e>250||r>250){var t;this.events.inputDelay.buffer.add({start_time:n.startTime,duration_ms:e,processing_duration_ms:r,inp_duration_ms:n.duration,event_name:n.name,event_target_id:(null==(t=n.target)?void 0:t.id)||"unknown_target",is_fid:"first-input"===n.entryType})}}}});return e.observe({entryTypes:["event","first-input"]}),e}initLongAnimationFrameObserver(){let e=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{blockingDuration:e}=t;if(this.events.longAnimationFrame.stats.add(t.duration),t.duration>=250){let n={start_time:t.startTime,duration_ms:t.duration,blocking_duration_ms:e||0};this.events.longAnimationFrame.buffer.add(n)}}});return e.observe({entryTypes:["long-animation-frame"]}),e}startReportMetricsInterval(){let e=()=>{this.reportMetricsTimeoutId=window.setTimeout(()=>{this.reportMetrics(),this.isActive&&e()},12e4)};e()}registerVisibilityHandlers(){document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.reportMetrics()},{passive:!0}),window.addEventListener("pagehide",()=>this.reportMetrics(),{passive:!0})}reportMetrics(){this.isActive&&(this.shouldReportMemory&&(0,o.r)("events.memory_snapshot",{metricType:"memory_snapshot"}),Object.values(this.events).forEach(e=>{let{name:t,stats:n,buffer:r}=e;0!==n.mean&&((0,o.r)("events.".concat(t,".summary"),{metricType:"".concat(t,"_summary"),performanceAttributes:{...n.getSummary()}}),r.toArray().forEach(e=>{let{duration_ms:n,...r}=e;(0,o.r)("events.".concat(t),{metricType:"".concat(t,"_event"),duration:n,performanceAttributes:{...r}})}),n.reset(),r.flush())}))}destroy(){this.isActive=!1,Object.values(this.events).forEach(e=>{var t;null==(t=e.observer)||t.disconnect(),e.observer=void 0}),clearTimeout(this.reportMetricsTimeoutId),this.reportMetricsTimeoutId=void 0,this.reportMetrics()}forceReport(){this.reportMetrics()}constructor(){this.isActive=!0,this.shouldReportMemory=!1,this.events={longTask:{name:"long_task",stats:new l,buffer:new a(100)},inputDelay:{name:"input_delay",stats:new l,buffer:new a(100)},longAnimationFrame:{name:"loaf",stats:new l,buffer:new a(100)}},this.init()}}var d=n(24024);class c{initPerfMon(){this.perfMon||(this.perfMon=new u)}trackNewChatInputReady(e,t){(0,o.r)("page.new_chat_input_ready",{duration:e,attributes:{is_first_load:t}}),d.C.clearParentContext()}trackTTFT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};t.model&&(n["chat.model"]=t.model),t.integrations&&(n["chat.integrations"]=t.integrations),(0,o.r)("chat.time_to_first_token",{metricType:"ttft",duration:e,attributes:n})}trackProjectConversationsReady(e){(0,o.r)("page.project_conversations_ready",{duration:e})}trackMembersListReady(e){(0,o.r)("page.members_list_ready",{duration:e})}constructor(){this.perfMon=null}}let m=new c;var f=n(27541),g=n(7620);let h=(0,g.createContext)(null);function v(e){let{children:t}=e,n=(0,f.usePathname)(),s=(0,g.useRef)(!0),a=(0,g.useRef)(null),i=(0,g.useRef)(!1),o=(0,g.useRef)(null),l=(0,g.useRef)(!1),u=(0,g.useRef)(null),d=(0,g.useRef)(!1),c=(0,g.useRef)(null),v=(0,g.useRef)(!1);(0,g.useEffect)(()=>{m.initPerfMon()},[]),(0,g.useEffect)(()=>{"/new"===n?(a.current=s.current?0:performance.now(),i.current=!1):(null==n?void 0:n.startsWith("/project/"))?(u.current=performance.now(),d.current=!1):"/settings/members"===n&&(c.current=performance.now(),v.current=!1),s.current=!1},[n]);let p=(0,g.useCallback)(()=>{if(i.current||null===a.current)return;i.current=!0;let e=performance.now()-a.current;m.trackNewChatInputReady(e,0===a.current),a.current=null},[]),y=(0,g.useCallback)(()=>{o.current=performance.now(),l.current=!1},[]),_=(0,g.useCallback)(e=>{if(null===o.current||l.current)return;l.current=!0;let t=performance.now()-o.current;m.trackTTFT(t,e),o.current=null},[]),b=(0,g.useCallback)(()=>{if(d.current||null===u.current)return;d.current=!0;let e=performance.now()-u.current;m.trackProjectConversationsReady(e),u.current=null},[]),S=(0,g.useCallback)(()=>{if(v.current||null===c.current)return;v.current=!0;let e=performance.now()-c.current;m.trackMembersListReady(e),c.current=null},[]),w=(0,g.useMemo)(()=>({markEditorReady:p,markMessageSent:y,markFirstTokenReceived:_,markProjectConversationsReady:b,markMembersListReady:S}),[p,y,_,b,S]);return(0,r.jsx)(h.Provider,{value:w,children:t})}function p(){let e=(0,g.useContext)(h);if(!e)throw Error("usePerformanceMetrics must be used within a PerformanceMetricsProvider");return e}},66912:(e,t,n)=>{n.d(t,{M:()=>i});var r=n(54568),s=n(72902),a=n(59666);function i(e){let{className:t,onClick:n,as:i="span"}=e;return(0,r.jsx)(i,{className:(0,s.A)("border-0.5 border-border-400 text-accent-secondary-000 px-1.5 py-px rounded-3xl font-small",n&&"cursor-pointer hover:border-border-300 transition-colors",t),onClick:n,children:(0,r.jsx)(a.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}},86141:(e,t,n)=>{n.d(t,{EF:()=>f,NY:()=>c,Ql:()=>h,VA:()=>g,qJ:()=>m});var r=n(1613),s=n(64328);n(39613);var a=n(80688),i=n(2e3),o=n(4869),l=n(7620),u=n(22167),d=n(91958);let c=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,i=!!(t&&e.length>0),o=(0,l.useMemo)(()=>e.map(e=>"/api/organizations/".concat(n,"/sync/chat/").concat(e)),[n,e]),d=(0,l.useMemo)(()=>({queryKey:e.map(e=>[a.GC,{orgUuid:n,syncSourceUuid:e}]),enabled:i,refetchInterval:e=>!!(e.state.data&&(0,u.z3)(e.state.data))&&5e3,meta:{noToast:!0}}),[i,n,e]);return(0,r._i)(o,d)},m=e=>!!e.some(e=>e.isLoading)||e.some(e=>e.data&&(0,u.z3)(e.data)),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,s.YL)(),l=null==t?void 0:t.uuid,c=null==n?void 0:n.uuid,m=(0,o.useQueryClient)(),f=(0,u.eL)();return(0,r.L2)(()=>"/api/organizations/".concat(c,"/sync/chat"),"POST",{enabled:!!n,...e,onSuccess:function(){for(var t,n,r,s,o,u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];let[g]=d;m.setQueryData([a.GC,{orgUuid:c,syncSourceUuid:g.uuid}],g),g.type===i.v8.GDRIVE&&g.config.uri&&(null==(t=g.status)?void 0:t.extra)&&(null==(n=g.status)?void 0:n.current_size_bytes)&&m.setQueryData([a.QB,{accountUuid:l,orgUuid:c,documentId:g.config.uri}],{uri:"drive:///".concat(g.config.uri),title:null==(s=g.status)?void 0:s.extra,size:null==(o=g.status)?void 0:o.current_size_bytes}),null==(r=e.onSuccess)||r.call(e,...d)},onError:function(){for(var t,n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];null==(t=e.onError)||t.call(e,...r);let[a,o]=r;f(a,o),o.sync_source_type===i.v8.GDRIVE&&(0,d.D8)(o.sync_source_config.uri)}})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,i=(0,o.useQueryClient)();return(0,r.L2)(()=>"/api/organizations/".concat(n,"/sync/chat"),"PUT",{enabled:!!t,...e,onSuccess:function(){for(var t,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];let[l]=s;i.setQueryData([a.GC,{orgUuid:n,syncSourceUuid:l.uuid}],l),null==(t=e.onSuccess)||t.call(e,...s)}})},h=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.L2)(e=>"/api/organizations/".concat(t,"/sync/chat/").concat(e),"DELETE",{enabled:!!e})}},91958:(e,t,n)=>{n.d(t,{Ac:()=>a,D8:()=>o,bI:()=>i});let r="recentDriveDocs";function s(e){return"object"==typeof e&&null!==e&&"string"==typeof e.uri&&("string"==typeof e.title||void 0===e.title)}function a(e){localStorage.setItem(r,JSON.stringify(e))}function i(){if("undefined"==typeof localStorage)return[];let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);if(t&&Array.isArray(t)&&t.every(s))return t}return[]}function o(e){let t=i();a(t=t.filter(t=>t.uri!==e))}}}]);