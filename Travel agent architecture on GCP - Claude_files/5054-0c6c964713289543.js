try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="7518a433-3ac7-45ec-8aef-8498b6a72641",e._sentryDebugIdIdentifier="sentry-dbid-7518a433-3ac7-45ec-8aef-8498b6a72641")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5054],{3743:(e,r,t)=>{t.d(r,{Ah:()=>i,Bs:()=>o,NJ:()=>a,VH:()=>n,Xs:()=>l,u5:()=>s});let n=e=>{let{account:r,isClaudeDot:t}=e;return t?!1===r.settings.has_finished_claudeai_onboarding:!r.full_name||!r.display_name},o=(e,r)=>r&&!e.is_verified,a=(e,r)=>!!function(e,r){for(let t of e.invites)if(t.organization.capabilities&&t.organization.capabilities.includes(r))return t}(e,r?"raven":"api"),i=(e,r)=>!r&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,s=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&r&&!e.age_is_verified},l=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n({account:e,isClaudeDot:r})||o(e,r)||a(e,r)||i(e,r)||s(e,r,t)}},18088:(e,r,t)=>{t.d(r,{Vc:()=>i,Wz:()=>a});var n=t(80039),o=t(61903);function a(e,r){return(0,n.F)({key:"SSS-".concat(e),defaultValue:r,serialize:JSON.stringify,deserialize:e=>void 0===e?r:JSON.parse(e)})}function i(e,r){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(0,o.Q)(e,r,t)}},45054:(e,r,t)=>{t.d(r,{ErrorSegmentConnector:()=>V,ErrorStatsigConnector:()=>j,ErrorsProvider:()=>C,i:()=>z,Y:()=>x});var n=t(54568),o=t(3743),a=t(16178),i=t(68067),s=t(69287),l=t(22300),u=t.n(l),c=t(61483),f=t.n(c),d=t(83487),g=t.n(d),y=t(27541),p=t(7620),b=t(24407),v=t(74813),_=t(64328);function m(e,r){let t=[];for(let n of e){if(null==n)continue;let e=w(n,r+1);""!==e&&t.push(e)}return t.length>0?t.join(" "):""}function w(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r>5?"":e instanceof Error?e.message:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?String(e):p.isValidElement(e)?function e(r,t){var n;let o=r.props;return"object"==typeof o&&null!==o&&"defaultMessage"in o&&"string"==typeof o.defaultMessage?o.defaultMessage:"object"==typeof o&&null!==o&&"children"in o?(n=o.children,"string"==typeof n||"number"==typeof n||"boolean"==typeof n?String(n):null==n?"":Array.isArray(n)?m(n,t+1):p.isValidElement(n)?e(n,t+1):w(n,t+1)):""}(e,r):Array.isArray(e)?m(e,r):""}var E=t(18088);let h=(0,p.createContext)(void 0),S=e=>{var r;if(e instanceof a.LG&&(null==(r=e.extra)?void 0:r.details)&&"object"==typeof e.extra.details&&"error_visibility"in e.extra.details)return String(e.extra.details.error_visibility)};function k(e){var r;let{userFacingMessage:t,error:n,toastId:o,errorContext:i,track:l,isApiError:u}=e,c=w(t),f=c?"".concat(c.substring(0,200)).concat(c.length>200?"...":""):"User-facing error toast",d=c?"User-facing error toast: ".concat(f):"User-facing error toast";l({event_key:"claudeai.user_facing_error.shown",error_message:f,toast_id:o,error_type:n instanceof a.LG?n.type:n instanceof Error?n.name:typeof n,error_source:(null==i||null==(r=i.tags)?void 0:r.source)||"unknown",has_original_error:!!n,original_error_message:n instanceof Error?n.message.substring(0,200):void 0,error_stack_trace:(e=>{if(e instanceof Error&&e.stack)return e.stack.split("\n").slice(0,3).join("\n").substring(0,500)})(n),error_code:(e=>{if(e instanceof a.LG){var r;if(e.errorCode)return e.errorCode;if((null==(r=e.extra)?void 0:r.details)&&"object"==typeof e.extra.details&&"error_code"in e.extra.details&&"string"==typeof e.extra.details.error_code)return e.extra.details.error_code}if(e instanceof Error&&"code"in e)return String(e.code)})(n),error_status_code:(e=>{if(e instanceof Error){if("statusCode"in e&&"number"==typeof e.statusCode)return e.statusCode;if("status"in e&&"number"==typeof e.status)return e.status}})(n),error_visibility:S(n),websocket_close_code:(e=>{var r;if(e instanceof a.LG&&(null==(r=e.extra)?void 0:r.details)&&"object"==typeof e.extra.details&&"websocket_close_code"in e.extra.details&&"number"==typeof e.extra.details.websocket_close_code)return e.extra.details.websocket_close_code})(n),is_instanceof_api_error:n instanceof a.LG,is_caller_api_error:u,offline_status:"undefined"!=typeof navigator?!navigator.onLine:void 0});let g=(null==i?void 0:i.tags)||{},y=(null==i?void 0:i.extra)||{};if(n instanceof Error){let e=Error(d);e.stack=n.stack,(0,s.Cp)(e,{tags:{source:"error-toast",...g},extra:{toastId:o,originalErrorMessage:n.message,originalError:n,...y}})}else n?(0,s.Cp)(Error(d),{tags:{source:"error-toast",errorType:typeof n,...g},extra:{toastId:o,originalError:n,...y}}):(0,s.Cp)(Error(d),{tags:{source:"error-toast",errorType:"string"==typeof t?"string":"react-element",...g},extra:{toastId:o,extractedText:d,...y}})}function C(e){let{children:r}=e,t=(0,p.useRef)(1),[o,a]=(0,p.useState)([]),i=(0,p.useRef)(null),s=(0,p.useRef)(null),l=(0,p.useRef)([]),u=(0,p.useCallback)(e=>{s.current=e,l.current.forEach(r=>{e(r,void 0)}),l.current=[]},[]),c=(0,p.useCallback)(e=>{i.current=e},[]),f=(0,p.useCallback)(async e=>{if(null!==s.current)return s.current(e);l.current.push(e)},[]),d=(0,p.useCallback)(e=>{a(r=>r.filter(r=>r.id!==e))},[]),g=(0,p.useCallback)((e,r)=>{let n=t.current++,{timeout:o,error:i,errorContext:s}=r||{};return k({userFacingMessage:e,error:i,toastId:n,errorContext:s,track:f,isApiError:!1}),a(r=>[...r,{id:n,message:e,toastType:"error"}]),o&&setTimeout(()=>d(n),o),n},[d,f]),y=(0,p.useCallback)((e,r)=>{let n=t.current++,{timeout:o,errorContext:s}=r||{},l=e instanceof Error?e.message:String(e);return k({userFacingMessage:l,error:e,toastId:n,errorContext:s,track:f,isApiError:!0}),i.current&&"user_facing"!==S(e)||a(e=>[...e,{id:n,message:l,toastType:"error"}]),o&&setTimeout(()=>d(n),o),n},[d,f]),b=(0,p.useCallback)((e,r)=>{let n=t.current++;return a(r=>[...r,{id:n,message:e,toastType:"success"}]),r&&setTimeout(()=>d(n),r),n},[d]),v=(0,p.useMemo)(()=>({toasts:o,addError:g,addApiError:y,addSuccess:b,clearToast:d,registerSegmentTracker:u,registerErrorVisibility:c}),[o,g,y,b,d,u,c]);return(0,n.jsx)(h.Provider,{value:v,children:r})}function x(){let e=(0,p.useContext)(h);if(!e)throw Error("Must be called within ErrorsProvider");return e}let I=b.z.object({id:b.z.string().optional().nullable(),title:b.z.string().optional().nullable(),message:b.z.string().optional().nullable(),displayFrequencyHours:b.z.number().optional().nullable()}),M={};function V(){let{registerSegmentTracker:e}=x(),{track:r}=(0,v.st)();return(0,p.useEffect)(()=>{e(r)},[e,r]),null}function j(){let{registerErrorVisibility:e}=x(),{value:r}=(0,i.fS)("claude_ai_error_visibility");return(0,p.useEffect)(()=>{e(r)},[e,r]),null}function z(){var e;let{id:r,title:t,message:n,displayFrequencyHours:a}=(0,i.iW)("claude_system_message",M,I),{account:s}=(0,_.YL)(),l=null!=(e=null==s?void 0:s.uuid)?e:"logged-out",c=(0,y.usePathname)(),[d,b]=(0,E.Vc)("dismissed-system-messages",{}),v=(0,p.useMemo)(()=>()=>b(e=>{let t=u()(e);return r&&g()(t,[l,r],Date.now()),t}),[b,l,r]);return(0,p.useMemo)(()=>{if(!s||(0,o.Xs)(s,!0)||"/download"===c||!r)return!1;let e=f()(d,[l,r]);return!e||"boolean"==typeof e||!!a&&Date.now()-e>=60*a*6e4},[s,r,l,d,a,c])?{currentSystemMessageId:r,currentSystemMessageTitle:t,currentSystemMessageContent:n,dismissCurrentSystemMessage:v}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},61903:(e,r,t)=>{t.d(r,{Q:()=>a,t:()=>o});var n=t(7620);function o(e){var r,t,o;let{key:a,defaultValue:i,deserialize:s=JSON.parse,getInitialValueInEffect:l=!1,sync:u=!0}=e,c="LSS-".concat(a),f=(0,n.useRef)(null!=(o=null==(r=(t=crypto).randomUUID)?void 0:r.call(t))?o:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2))),d=(0,n.useRef)(!1),[g,y]=(0,n.useState)(()=>{if(l)return i;try{let e=window.localStorage.getItem(c);if(e){let r=JSON.parse(e);if(r&&"object"==typeof r&&"value"in r)return r.value;return s(e)}}catch(e){console.warn("Error reading localStorage key “".concat(c,"”:"),e)}return i});(0,n.useEffect)(()=>{if(l)try{let e=window.localStorage.getItem(c);if(e){let r=JSON.parse(e);r&&"object"==typeof r&&"value"in r?y(r.value):y(s(e))}}catch(e){console.warn("Error reading localStorage key “".concat(c,"”:"),e)}},[c,s,l]);let p=(0,n.useCallback)(e=>{d.current=!0,y(r=>{let t="function"==typeof e?e(r):e;try{let e={value:t,tabId:f.current,timestamp:Date.now()},r=JSON.stringify(e);if(window.localStorage.setItem(c,r),u){let e=new StorageEvent("storage",{key:c,newValue:r,oldValue:window.localStorage.getItem(c),storageArea:window.localStorage,url:window.location.href});window.dispatchEvent(e)}}catch(e){console.warn("Error writing localStorage key “".concat(c,"”:"),e)}return t}),Promise.resolve().then(()=>{d.current=!1})},[c,u]),b=(0,n.useCallback)(()=>{window.localStorage.removeItem(c),y(i)},[c,i]);return(0,n.useEffect)(()=>{if(!u)return;let e=e=>{if(e.key===c&&e.newValue&&!d.current)try{let r=JSON.parse(e.newValue);if(r&&"object"==typeof r&&"value"in r&&"tabId"in r){if(r.tabId===f.current)return;y(r.value)}else y(s(e.newValue))}catch(e){console.warn("Error handling storage event for “".concat(c,"”:"),e)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[c,u,s]),[g,p,b]}function a(e,r){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return o({key:e,defaultValue:r,deserialize:e=>void 0===e?r:JSON.parse(e),getInitialValueInEffect:!1,sync:t})}}}]);